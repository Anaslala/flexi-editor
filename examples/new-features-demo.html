<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Flexi Editor - New Features Demo</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            margin: 0;
            padding: 20px;
            background: #f5f5f5;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
        }
        
        h1 {
            color: #333;
            margin-bottom: 10px;
        }
        
        .subtitle {
            color: #666;
            margin-bottom: 30px;
        }
        
        .features-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .feature-card {
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .feature-card h3 {
            margin-top: 0;
            color: #1b9af7;
        }
        
        .feature-card ul {
            margin: 10px 0;
            padding-left: 20px;
        }
        
        .feature-card li {
            margin: 5px 0;
            color: #666;
        }
        
        .editor-wrapper {
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            margin-bottom: 30px;
        }
        
        #editor {
            min-height: 400px;
            border: 1px solid #ddd;
            border-radius: 4px;
        }
        
        .test-section {
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }
        
        .test-section h3 {
            margin-top: 0;
            color: #333;
        }
        
        .test-content {
            background: #f9f9f9;
            padding: 15px;
            border-radius: 4px;
            border: 1px solid #e5e7eb;
            margin: 10px 0;
        }
        
        .test-content h4 {
            margin-top: 0;
        }
        
        button {
            background: #1b9af7;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
            margin-right: 10px;
        }
        
        button:hover {
            background: #1585d8;
        }
        
        .status {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: 600;
            margin-left: 10px;
        }
        
        .status.enabled {
            background: #d4edda;
            color: #155724;
        }
        
        .status.disabled {
            background: #f8d7da;
            color: #721c24;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ðŸš€ Flexi Editor - New Features Demo</h1>
        <p class="subtitle">Testing Auto Save, Smart Paste, and Image Upload features</p>
        
        <div class="features-grid">
            <div class="feature-card">
                <h3>ðŸ’¾ Auto Save</h3>
                <ul>
                    <li>Automatic content saving</li>
                    <li>Draft recovery on reload</li>
                    <li>Debounced (2 second delay)</li>
                    <li>localStorage persistence</li>
                </ul>
                <span class="status enabled">ENABLED</span>
            </div>
            
            <div class="feature-card">
                <h3>ðŸ“‹ Smart Paste</h3>
                <ul>
                    <li>Cleans Word/Docs formatting</li>
                    <li>Removes inline styles</li>
                    <li>Preserves semantic tags</li>
                    <li>Fallback to plain text</li>
                </ul>
                <span class="status enabled">ENABLED</span>
            </div>
            
            <div class="feature-card">
                <h3>ðŸ“¸ Image Upload</h3>
                <ul>
                    <li>File picker upload</li>
                    <li>Drag and drop support</li>
                    <li>Base64 encoding (default)</li>
                    <li>Custom adapter support</li>
                </ul>
                <span class="status enabled">ENABLED</span>
            </div>
        </div>
        
        <div class="editor-wrapper">
            <h2>Editor</h2>
            <div id="editor"></div>
        </div>
        
        <div class="test-section">
            <h3>ðŸ§ª Test Auto Save</h3>
            <p>Type some content in the editor above. After 2 seconds, it will be automatically saved to localStorage.</p>
            <button onclick="reloadPage()">Reload Page (Test Draft Recovery)</button>
            <button onclick="clearDraft()">Clear Draft</button>
            <button onclick="checkDraft()">Check Draft Status</button>
        </div>
        
        <div class="test-section">
            <h3>ðŸ§ª Test Smart Paste</h3>
            <p>Copy and paste the content below from Word or Google Docs to see the cleaning in action:</p>
            
            <div class="test-content">
                <h4>Sample Word Content (copy this):</h4>
                <p style="color: red; font-family: Arial; font-size: 16px; background: yellow;">
                    <span style="mso-style-name: 'Heading 1';">This is a heading with Word styles</span>
                </p>
                <p style="margin-left: 20px; text-indent: 10px;">
                    This paragraph has <strong style="color: blue;">bold text</strong> and 
                    <em style="font-family: Times;">italic text</em> with inline styles.
                </p>
                <ul style="list-style-type: square;">
                    <li style="color: green;">List item 1</li>
                    <li style="color: green;">List item 2</li>
                </ul>
            </div>
            
            <p><strong>Expected Result:</strong> Inline styles removed, but headings, bold, italic, and lists preserved.</p>
        </div>
        
        <div class="test-section">
            <h3>ðŸ§ª Test Image Upload</h3>
            <p>Test image upload in two ways:</p>
            <ol>
                <li><strong>File Picker:</strong> Click the Image button in the toolbar, switch to "Upload File" tab, and select an image.</li>
                <li><strong>Drag & Drop:</strong> Drag an image file from your computer directly into the editor.</li>
            </ol>
            <p><strong>Note:</strong> The default adapter uses base64 encoding. Images are embedded directly in the HTML.</p>
        </div>
        
        <div class="test-section">
            <h3>ðŸ“Š Configuration</h3>
            <p>Current editor configuration:</p>
            <pre style="background: #f9f9f9; padding: 15px; border-radius: 4px; overflow-x: auto;"><code>{
  preset: 'full',
  autoSave: {
    enabled: true,
    interval: 2000,
    key: 'flexi-editor-demo'
  },
  smartPaste: {
    enabled: true,
    mode: 'clean'
  },
  imageUpload: {
    enabled: true,
    maxSize: 5 * 1024 * 1024 // 5MB
  }
}</code></pre>
        </div>
    </div>
    
    <script type="module">
        import FlexiEditor from '../dist/flexi-editor.es.js';
        
        // Initialize editor with all new features enabled
        const editor = new FlexiEditor({
            element: document.getElementById('editor'),
            content: '<p>Start typing to test auto-save...</p>',
            placeholder: 'Type here...',
            preset: 'full',
            autoSave: {
                enabled: true,
                interval: 2000,
                key: 'flexi-editor-demo'
            },
            smartPaste: {
                enabled: true,
                mode: 'clean'
            },
            imageUpload: {
                enabled: true,
                maxSize: 5 * 1024 * 1024 // 5MB
            }
        });
        
        // Listen to autosave events
        editor.on('autosave', (data) => {
            console.log('Content auto-saved:', data);
            showNotification('âœ… Content auto-saved');
        });
        
        // Make editor available globally for testing
        window.editor = editor;
        
        // Helper functions
        window.reloadPage = () => {
            location.reload();
        };
        
        window.clearDraft = () => {
            localStorage.removeItem('flexi-editor-demo-editor');
            showNotification('ðŸ—‘ï¸ Draft cleared');
        };
        
        window.checkDraft = () => {
            const draft = localStorage.getItem('flexi-editor-demo-editor');
            if (draft) {
                const data = JSON.parse(draft);
                const date = new Date(data.timestamp);
                showNotification(`ðŸ’¾ Draft found from ${date.toLocaleString()}`);
                console.log('Draft data:', data);
            } else {
                showNotification('âŒ No draft found');
            }
        };
        
        function showNotification(message) {
            const notification = document.createElement('div');
            notification.textContent = message;
            notification.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                background: #1b9af7;
                color: white;
                padding: 12px 20px;
                border-radius: 8px;
                box-shadow: 0 4px 12px rgba(0,0,0,0.2);
                z-index: 10000;
                animation: slideIn 0.3s ease;
            `;
            
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.style.animation = 'slideOut 0.3s ease';
                setTimeout(() => notification.remove(), 300);
            }, 3000);
        }
        
        // Add animations
        const style = document.createElement('style');
        style.textContent = `
            @keyframes slideIn {
                from {
                    transform: translateX(100%);
                    opacity: 0;
                }
                to {
                    transform: translateX(0);
                    opacity: 1;
                }
            }
            @keyframes slideOut {
                from {
                    transform: translateX(0);
                    opacity: 1;
                }
                to {
                    transform: translateX(100%);
                    opacity: 0;
                }
            }
        `;
        document.head.appendChild(style);
    </script>
</body>
</html>
